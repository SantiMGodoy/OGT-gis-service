services:
  # Base de Datos Espacial (SQL Server)
  gis-sqlserver:
    image: mcr.microsoft.com/mssql/server:2022-latest
    container_name: ogt-gis-sqlserver
    environment:
      ACCEPT_EULA: "Y"
      SA_PASSWORD: "StrongPassword123!"
      MSSQL_PID: "Developer"
    ports:
      - "1433:1433"
    volumes:
      - sqlserver_gis_data:/var/opt/mssql
    networks:
      - ogt-network

  # Mensajer√≠a (RabbitMQ)
  gis-rabbitmq:
    image: rabbitmq:3.12-management
    container_name: ogt-gis-rabbitmq
    environment:
      RABBITMQ_DEFAULT_USER: admin
      RABBITMQ_DEFAULT_PASS: admin123
    ports:
      - "5672:5672"   # App Java
      - "15672:15672" # Panel Web
    networks:
      - ogt-network

  # MinIO (Para guardar archivos exportados - DXF/SHP)
  gis-minio:
    image: minio/minio:latest
    container_name: ogt-gis-minio
    command: server /data --console-address ":9001"
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin
    ports:
      - "9000:9000"   # API
      - "9001:9001"   # Console UI
    volumes:
      - minio_gis_data:/data
    networks:
      - ogt-network

volumes:
  sqlserver_gis_data:
  minio_gis_data:

networks:
  ogt-network:
    driver: bridge